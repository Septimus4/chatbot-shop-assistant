<h1>Chat #<%= @chat.id %></h1>

<div class="chat-history" style="border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; max-height: 400px; overflow-y: auto;">
  <% if @messages.any? %>
    <% @messages.each do |message| %>
      <div style="margin-bottom: 10px;">
        <strong><%= message.sender_type.capitalize %>:</strong>
        <%= simple_format(message.content) %>
        <small style="color: gray;">(<%= message.created_at.strftime("%Y-%m-%d %H:%M") %>)</small>
      </div>
    <% end %>
  <% else %>
    <p>No messages yet. Start the conversation!</p>
  <% end %>
</div>

<h2>Send a New Message</h2>

<%= form_with model: [@chat, Message.new], local: true do |form| %>
  <div class="form-group">
    <%= form.text_area :content, rows: 3, class: "form-control", placeholder: "Type your message..." %>
  </div>

  <div class="form-group" style="margin-top: 10px;">
    <%= form.submit "Send Message", class: "btn btn-success" %>
  </div>
<% end %>

<div style="margin-top: 20px;">
  <%= link_to "Back to Chats", chats_path, class: "btn btn-secondary" %>
</div>
